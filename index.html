<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For You ‚ù§Ô∏è</title>
    
    <!-- FAVICON -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚ù§Ô∏è</text></svg>">

    <!-- GOOGLE FONTS (With Fallback) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        /* --- RESET & BASE STYLES --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent; /* Remove mobile tap blue box */
        }

        body {
            font-family: 'Montserrat', sans-serif; /* Fallback: sans-serif */
            background-color: #0f172a;
            color: white;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
        }

        /* --- LAYOUT UTILITIES (Replaces Tailwind) --- */
        .flex-center-col {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }

        .relative { position: relative; }
        .z-10 { z-index: 10; }
        .text-center { text-align: center; }

        /* --- BACKGROUNDS --- */
        #bg-image {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('./proposal.jpg'); 
            background-size: cover; background-position: center;
            z-index: -2; transition: filter 2s ease;
        }

        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(15, 23, 42, 0.4), rgba(15, 23, 42, 0.9));
            z-index: -1;
        }

        #floating-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0;
        }

        /* --- TYPOGRAPHY --- */
        h1.title {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5rem; /* Mobile */
            color: #fcd34d; /* Amber-300 */
            text-shadow: 0 4px 10px rgba(0,0,0,0.5);
            margin-bottom: 1.5rem;
            line-height: 1.2;
        }

        p.subtitle {
            font-size: 1.125rem;
            color: #f3f4f6;
            font-weight: 300;
            line-height: 1.6;
            margin-bottom: 2.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        /* Desktop Text Sizes */
        @media (min-width: 768px) {
            h1.title { font-size: 5rem; }
            p.subtitle { font-size: 1.5rem; }
        }

        /* --- COMPONENTS --- */
        
        /* Glass Card */
        .glass-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 1.5rem;
            padding: 2.5rem 1.5rem;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            transition: opacity 1s ease, transform 1s ease;
        }

        /* Buttons */
        .btn {
            border: none;
            outline: none;
            cursor: pointer;
            padding: 1rem 2.5rem;
            border-radius: 9999px;
            font-weight: 600;
            font-size: 1.125rem;
            font-family: 'Montserrat', sans-serif;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .btn:active { transform: scale(0.95); }

        .btn-wish {
            background: linear-gradient(to right, #f59e0b, #ea580c); /* Amber to Orange */
            color: white;
            animation: pulse 2s infinite;
        }

        .btn-yes {
            background-color: #e11d48; /* Rose-600 */
            color: white;
            padding: 1.25rem 4rem;
            font-size: 1.25rem;
        }

        .btn-no {
            background-color: rgba(31, 41, 55, 0.6); /* Gray-800/60 */
            color: #d1d5db; /* Gray-300 */
            font-size: 0.875rem;
            padding: 0.75rem 2rem;
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(4px);
            margin-top: 1rem;
        }

        .btn-row {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }
        @media (min-width: 768px) {
            .btn-row { flex-direction: row; justify-content: center; }
            .btn-no { margin-top: 0; }
        }

        /* --- ANIMATIONS & PARTICLES --- */
        .lantern {
            position: absolute;
            background: radial-gradient(circle, #ffdb58 0%, #ffa500 100%);
            width: 18px; height: 28px;
            border-radius: 5px 5px 15px 15px;
            bottom: -50px; opacity: 0.8;
            box-shadow: 0 0 15px #ffae00, 0 0 30px #ff6a00;
            animation: floatUp linear infinite;
        }

        .floating-photo {
            position: absolute; width: 110px; padding: 8px 8px 25px 8px;
            background: #fff; box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            opacity: 0.85; pointer-events: none; z-index: 2;
            animation: floatHover ease-in-out infinite alternate;
        }
        .floating-photo img { width: 100%; height: auto; display: block; }

        @keyframes floatUp {
            0% { transform: translateY(0) scale(1) rotate(0deg); opacity: 0; }
            10% { opacity: 0.9; }
            100% { transform: translateY(-120vh) scale(0.5) rotate(10deg); opacity: 0; }
        }

        @keyframes floatHover {
            0% { transform: translate(0, 0) rotate(var(--rot)); }
            100% { transform: translate(var(--move-x), var(--move-y)) rotate(var(--rot-end)); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.9; transform: scale(1.02); }
        }

        .click-heart {
            position: absolute; font-size: 1.5rem; pointer-events: none;
            animation: popHeart 1s ease-out forwards; z-index: 50;
        }
        @keyframes popHeart {
            0% { transform: scale(0) translateY(0); opacity: 1; }
            100% { transform: scale(1.5) translateY(-50px); opacity: 0; }
        }

        .cursor::after { content: '|'; animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0; } }

        /* --- UTILITY CLASSES --- */
        .hidden-layout { display: none !important; }
        .opacity-0 { opacity: 0; pointer-events: none; }
        .opacity-100 { opacity: 1; pointer-events: auto; }
        .fade-in-delay { transition: opacity 1s ease 0.5s; }

        /* --- MODAL --- */
        #no-modal {
            position: fixed; inset: 0;
            display: flex; align-items: center; justify-content: center;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
            z-index: 100;
            transition: opacity 0.3s;
        }
        #reopen-btn {
            position: fixed; bottom: 2rem; right: 2rem;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            padding: 1rem; border-radius: 50%;
            font-size: 1.5rem; cursor: pointer;
            backdrop-filter: blur(10px);
            z-index: 50;
            transition: all 0.3s;
        }
        
        /* Final Card Image */
        .final-img {
            width: 100%; height: auto; max-height: 40vh;
            object-fit: cover; border-radius: 1rem;
            margin-bottom: 1.5rem;
            border: 2px solid rgba(255,255,255,0.2);
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        .timer-box { border-top: 1px solid rgba(255,255,255,0.2); margin-top: 1.5rem; padding-top: 1.5rem; }
    </style>
</head>
<body onclick="createHeartBurst(event)">

    <div id="bg-image"></div>
    <div class="overlay"></div>
    <div id="floating-container"></div>

    <audio id="bg-music" loop>
        <source src="song.mp3" type="audio/mpeg">
    </audio>

    <!-- REOPEN BTN -->
    <button id="reopen-btn" class="hidden-layout opacity-0" onclick="toggleCard(true); event.stopPropagation();">üíå</button>
    
    <!-- MODAL -->
    <div id="no-modal" class="hidden-layout opacity-0">
        <div style="position:absolute;inset:0;" onclick="closeNoModal()"></div>
        <div class="glass-card" style="max-width:320px; transform: scale(0.95); transition: transform 0.3s;" id="modal-card">
            <h3 style="font-family:'Dancing Script'; color:#fca5a5; font-size:2rem; margin-bottom:0.5rem;">Nice Try! üòâ</h3>
            <p style="margin-bottom:1.5rem;">But the universe has already decided. (> . <) </p>
            <button class="btn btn-yes" style="padding: 0.75rem 2rem; font-size:1rem;" onclick="closeNoModal()">Okay, YES! ‚ù§Ô∏è</button>
        </div>
    </div>

    <main class="flex-center-col relative z-10">

        <!-- PHASE 1 -->
        <div id="phase-1" class="glass-card text-center">
            <h1 class="title">Happy Birthday!</h1>
            <p class="subtitle">
                To the most beautiful soul in the universe. <br>
                Make a wish...
            </p>
            <button onclick="startProposal(event)" class="btn btn-wish">
                ‚ú® Make a Wish ‚ú®
            </button>
        </div>

        <!-- PHASE 2 -->
        <div id="phase-2" class="opacity-0 hidden-layout flex-center-col">
            <h1 id="typewriter-text" class="title" style="min-height: 1.2em;"></h1>
            
            <p class="subtitle fade-in-delay opacity-0">
                Hold my hand and become the Queen üëë‚ù§Ô∏è
            </p>
            
            <div class="btn-row fade-in-delay opacity-0">
                <button onclick="sheSaidYes(event)" class="btn btn-yes">YES! üíç</button>
                <button onclick="showNoModal(event)" class="btn btn-no">No (404)</button>
            </div>
        </div>

        <!-- PHASE 3 -->
        <div id="phase-3" class="opacity-0 hidden-layout flex-center-col">
            <div class="glass-card relative">
                <!-- Close Icon -->
                <button onclick="toggleCard(false); event.stopPropagation();" style="position:absolute; top:1rem; right:1rem; background:none; border:none; color:rgba(255,255,255,0.6); font-size:1.5rem; cursor:pointer;">&times;</button>

                <img src="./proposal.jpg" alt="Our Future" class="final-img">
                
                <h2 style="font-family:'Dancing Script'; font-size:2rem; color:#fef3c7; margin-bottom:0.5rem; text-align:center;">
                    Let's recreate this moment!
                </h2>
                
                <div class="timer-box text-center">
                    <p style="font-size:0.75rem; text-transform:uppercase; letter-spacing:0.1em; opacity:0.8; margin-bottom:0.5rem;">Falling in love for</p>
                    <div id="timer" style="font-family:monospace; font-size:1.25rem; font-weight:bold;">00d 00h 00m 00s</div>
                </div>
                <p style="font-size:0.75rem; opacity:0.5; margin-top:1.5rem; text-align:center; letter-spacing:0.2em; text-transform:uppercase;">Screenshot this ‚ù§Ô∏è</p>
            </div>
        </div>

    </main>

    <script>
        const PHOTO_LIST = ['image1.jpg', 'image2.jpg', 'image3.jpg', 'image4.jpg', 'image5.jpg', 'image6.jpg', 'image7.jpg', 'image8.jpg', 'image9.jpg', 'image10.jpg', 'image11.jpg', 'image12.jpg', 'image13.jpg', 'image14.jpg'];
        const START_DATE = new Date("2022-05-10"); 

        function createLantern() {
            const container = document.getElementById('floating-container');
            const lantern = document.createElement('div');
            lantern.classList.add('lantern');
            lantern.style.left = Math.random() * 100 + 'vw';
            const duration = Math.random() * 5 + 8 + 's';
            lantern.style.animationDuration = duration;
            lantern.style.transform = `scale(${Math.random() * 0.5 + 0.5})`;
            container.appendChild(lantern);
            setTimeout(() => lantern.remove(), parseFloat(duration) * 1000);
        }

        function initPhotos() {
            const container = document.getElementById('floating-container');
            PHOTO_LIST.forEach((imgName) => {
                const frame = document.createElement('div');
                frame.classList.add('floating-photo');
                frame.style.left = Math.random() * 85 + 'vw';
                frame.style.top = Math.random() * 85 + 'vh';
                frame.style.setProperty('--move-x', (Math.random() * 40 - 20) + 'px');
                frame.style.setProperty('--move-y', (Math.random() * 40 - 20) + 'px');
                frame.style.setProperty('--rot', (Math.random() * 20 - 10) + 'deg');
                frame.style.setProperty('--rot-end', (Math.random() * 20 - 10) + 'deg');
                frame.style.animationDuration = (Math.random() * 3 + 3) + 's';
                frame.style.animationDelay = (Math.random() * 2) + 's';
                const img = document.createElement('img');
                img.src = imgName;
                img.onerror = function() { frame.style.display = 'none'; }; 
                frame.appendChild(img);
                container.appendChild(frame);
            });
        }

        function createHeartBurst(e) {
            if(e.target.tagName === 'BUTTON') return;
            const container = document.body;
            const heart = document.createElement('div');
            heart.innerText = '‚ù§Ô∏è';
            heart.classList.add('click-heart');
            heart.style.left = (e.clientX - 10) + 'px';
            heart.style.top = (e.clientY - 10) + 'px';
            heart.style.transform = `rotate(${Math.random() * 40 - 20}deg)`;
            container.appendChild(heart);
            setTimeout(() => heart.remove(), 1000);
        }

        setInterval(createLantern, 800);
        setInterval(() => {
            const now = new Date();
            const diff = now - START_DATE;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const minutes = Math.floor((diff / 1000 / 60) % 60);
            const seconds = Math.floor((diff / 1000) % 60);
            document.getElementById('timer').innerText = `${days}d ${hours}h ${minutes}m ${seconds}s`;
        }, 1000);
        initPhotos();

        function typeWriter(text, i, fnCallback) {
            if (i < text.length) {
                document.getElementById("typewriter-text").innerHTML = text.substring(0, i+1) + '<span class="cursor"></span>';
                setTimeout(function() { typeWriter(text, i + 1, fnCallback) }, 100);
            } else if (typeof fnCallback == 'function') {
                fnCallback();
            }
        }

        function startProposal(e) {
            if(e) e.stopPropagation(); 
            document.getElementById('bg-music').play().catch(() => {});
            const p1 = document.getElementById('phase-1');
            p1.classList.add('opacity-0');
            setTimeout(() => {
                p1.classList.add('hidden-layout');
                const p2 = document.getElementById('phase-2');
                p2.classList.remove('hidden-layout');
                setTimeout(() => {
                    p2.classList.remove('opacity-0');
                    p2.classList.add('opacity-100');
                    typeWriter("Will You...", 0, function() {
                        document.querySelectorAll('.fade-in-delay').forEach(el => {
                            el.classList.remove('opacity-0');
                            el.classList.add('opacity-100');
                        });
                    });
                }, 100);
            }, 1000);
            let intense = setInterval(createLantern, 200);
            setTimeout(() => clearInterval(intense), 5000);
            document.getElementById('bg-image').style.filter = "brightness(1.0)";
        }

        function sheSaidYes(e) {
            if(e) e.stopPropagation();
            const p2 = document.getElementById('phase-2');
            p2.classList.remove('opacity-100');
            p2.classList.add('opacity-0');
            setTimeout(() => {
                p2.classList.add('hidden-layout');
                const p3 = document.getElementById('phase-3');
                p3.classList.remove('hidden-layout');
                setTimeout(() => {
                    p3.classList.remove('opacity-0');
                    p3.classList.add('opacity-100');
                }, 50);
            }, 1000);
            setInterval(createLantern, 100);
        }

        function toggleCard(show) {
            const card = document.getElementById('phase-3');
            const btn = document.getElementById('reopen-btn');
            if (show) {
                btn.classList.add('opacity-0');
                setTimeout(() => btn.classList.add('hidden-layout'), 500);
                card.classList.remove('hidden-layout');
                setTimeout(() => {
                    card.classList.remove('opacity-0');
                    card.classList.add('opacity-100');
                }, 50);
            } else {
                card.classList.remove('opacity-100');
                card.classList.add('opacity-0');
                setTimeout(() => {
                    card.classList.add('hidden-layout');
                    btn.classList.remove('hidden-layout');
                    setTimeout(() => btn.classList.remove('opacity-0'), 50);
                }, 1000);
            }
        }
        
        function showNoModal(e) {
            if(e) e.stopPropagation();
            const modal = document.getElementById('no-modal');
            const card = document.getElementById('modal-card');
            modal.classList.remove('hidden-layout');
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                card.style.transform = 'scale(1)';
            }, 10);
        }

        function closeNoModal() {
            const modal = document.getElementById('no-modal');
            const card = document.getElementById('modal-card');
            modal.classList.add('opacity-0');
            card.style.transform = 'scale(0.95)';
            setTimeout(() => {
                modal.classList.add('hidden-layout');
            }, 300);
        }
    </script>
</body>
</html>
