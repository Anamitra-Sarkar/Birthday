<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For You ‚ù§Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* CUSTOM STYLES */
        body {
            margin: 0; padding: 0;
            font-family: 'Montserrat', sans-serif;
            background-color: #0f172a;
            overflow: hidden; /* Prevent scroll for immersive feel */
            touch-action: manipulation;
        }

        #bg-image {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('./proposal.jpg'); 
            background-size: cover; background-position: center;
            z-index: -2; transition: filter 2s ease;
        }

        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(15, 23, 42, 0.4), rgba(15, 23, 42, 0.9));
            z-index: -1;
        }

        /* LANTERNS */
        .lantern {
            position: absolute;
            background: radial-gradient(circle, #ffdb58 0%, #ffa500 100%);
            width: 18px; height: 28px;
            border-radius: 5px 5px 15px 15px;
            bottom: -50px; opacity: 0.8;
            box-shadow: 0 0 15px #ffae00, 0 0 30px #ff6a00;
            animation: floatUp linear infinite;
            will-change: transform, opacity;
            z-index: 1; /* Lanterns glow behind everything */
        }

        /* PERMANENT FLOATING PHOTOS */
        .floating-photo {
            position: absolute;
            width: 110px; /* Slightly smaller to fit 14 comfortably */
            padding: 8px 8px 25px 8px; /* Polaroid padding */
            background: #fff;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            opacity: 0.85; /* Slight transparency to blend with night sky */
            pointer-events: none; /* Let clicks pass through */
            z-index: 2; /* BEHIND the text card (level 20) */
            
            /* The Hover Animation */
            animation: floatHover ease-in-out infinite alternate;
        }

        .floating-photo img {
            width: 100%;
            height: auto;
            aspect-ratio: 1/1; /* Square crop */
            object-fit: cover;
            display: block;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) scale(1) rotate(0deg); opacity: 0; }
            10% { opacity: 0.9; }
            100% { transform: translateY(-110vh) scale(0.5) rotate(10deg); opacity: 0; }
        }

        /* New "Zero Displacement" Animation */
        @keyframes floatHover {
            0% {
                transform: translate(0, 0) rotate(var(--rot));
            }
            100% {
                transform: translate(var(--move-x), var(--move-y)) rotate(var(--rot-end));
            }
        }

        /* CLICK HEART PARTICLES */
        .click-heart {
            position: absolute;
            font-size: 1.5rem;
            pointer-events: none;
            animation: popHeart 1s ease-out forwards;
            z-index: 50;
        }

        @keyframes popHeart {
            0% { transform: scale(0) translateY(0); opacity: 1; }
            100% { transform: scale(1.5) translateY(-50px); opacity: 0; }
        }

        /* TYPOGRAPHY & LAYOUT */
        h1, h2 { font-family: 'Dancing Script', cursive; text-shadow: 0 2px 10px rgba(0,0,0,0.3); }

        .glass-card {
            background: rgba(255, 255, 255, 0.15); 
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
            z-index: 20; /* Keep text ABOVE photos */
        }

        .transition-opacity { transition: opacity 1s ease-in-out; }
        .opacity-0 { opacity: 0; pointer-events: none; }
        .opacity-100 { opacity: 1; pointer-events: auto; }
        .hidden-layout { display: none !important; }
        
        /* TYPEWRITER CURSOR */
        .cursor::after { content: '|'; animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0; } }
    </style>
</head>
<body class="text-white w-full h-full overflow-hidden" onclick="createHeartBurst(event)">

    <div id="bg-image"></div>
    <div class="overlay"></div>
    
    <!-- Container for Lanterns and Photos -->
    <div id="floating-container" class="fixed inset-0 pointer-events-none z-0"></div>

    <audio id="bg-music" loop>
        <source src="song.mp3" type="audio/mpeg">
    </audio>

    <main class="h-[100dvh] w-full flex flex-col items-center justify-center p-6 relative z-10">

        <!-- PHASE 1: Greeting -->
        <div id="phase-1" class="glass-card p-10 md:p-14 rounded-3xl text-center max-w-sm md:max-w-xl w-full transition-opacity duration-1000">
            <h1 class="text-5xl md:text-7xl mb-6 text-amber-300 tracking-wide">Happy Birthday!</h1>
            <p class="text-lg md:text-2xl mb-10 font-light leading-relaxed text-gray-100">
                To the most beautiful soul in the universe. <br>
                Make a wish...
            </p>
            <button onclick="startProposal(event)" class="bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 active:scale-95 text-white font-semibold py-4 px-10 rounded-full shadow-xl transition-all duration-300 animate-pulse text-lg md:text-xl tracking-wider">
                ‚ú® Make a Wish ‚ú®
            </button>
        </div>

        <!-- PHASE 2: Proposal (Typewriter) -->
        <div id="phase-2" class="opacity-0 hidden-layout text-center max-w-4xl w-full transition-opacity duration-1000 ease-in">
            <!-- ID for Typewriter Effect -->
            <h1 id="typewriter-text" class="text-5xl md:text-8xl mb-8 text-amber-200 drop-shadow-lg min-h-[1.2em]"></h1>
            
            <p class="text-2xl md:text-4xl mb-12 font-medium drop-shadow-md leading-relaxed text-white fade-in-delay opacity-0 transition-opacity duration-1000">
                Hold my hand and become the Queen üëë‚ù§Ô∏è
            </p>
            
            <div class="flex flex-col md:flex-row gap-6 justify-center items-center w-full px-4 fade-in-delay opacity-0 transition-opacity duration-1000 delay-500">
                <button onclick="sheSaidYes(event)" class="bg-rose-600 hover:bg-rose-700 active:bg-rose-800 text-white text-xl md:text-2xl font-bold py-5 px-16 rounded-full shadow-2xl transform hover:scale-105 active:scale-95 transition-all duration-300 w-full md:w-auto ring-4 ring-rose-500/30">
                    YES! üíç
                </button>
                <button onclick="alert('Error: This button is disabled by the universe üòâ'); event.stopPropagation();" class="bg-gray-800/40 hover:bg-gray-800/60 text-gray-400 text-sm py-3 px-8 rounded-full backdrop-blur-sm border border-gray-600/30 transition-colors">
                    No (404)
                </button>
            </div>
        </div>

        <!-- PHASE 3: Promise & Timer -->
        <div id="phase-3" class="opacity-0 hidden-layout w-full max-w-lg transition-opacity duration-1000 ease-in">
            <div class="glass-card p-6 md:p-8 rounded-3xl mx-auto border border-amber-500/20">
                <img src="./proposal.jpg" alt="Our Future" class="w-full h-auto max-h-[40vh] object-cover rounded-2xl mb-6 shadow-2xl border-2 border-white/20">
                
                <h2 class="text-3xl md:text-4xl font-bold text-center text-amber-100 mb-2">
                    Let's recreate this moment!
                </h2>
                
                <!-- Live Counter -->
                <div class="mt-6 pt-6 border-t border-white/10">
                    <p class="text-sm text-amber-200/80 uppercase tracking-widest mb-2">Falling in love for</p>
                    <div id="timer" class="text-xl md:text-2xl font-mono text-white font-bold">
                        00d 00h 00m 00s
                    </div>
                </div>

                <p class="text-xs text-amber-200/40 mt-6 tracking-[0.2em] uppercase text-center">Screenshot this ‚ù§Ô∏è</p>
            </div>
        </div>

    </main>

    <script>
        // --- CONFIGURATION ---
        const PHOTO_LIST = [
            'image1.jpg', 'image2.jpg', 'image3.jpg', 'image4.jpg', 
            'image5.jpg', 'image6.jpg', 'image7.jpg', 'image8.jpg',
            'image9.jpg', 'image10.jpg', 'image11.jpg', 'image12.jpg',
            'image13.jpg', 'image14.jpg'
        ];
        
        // Date you met/started dating (YYYY-MM-DD)
        const START_DATE = new Date("2022-05-10"); 

        // --- LOGIC ---

        function createLantern() {
            const container = document.getElementById('floating-container');
            if (!container) return;
            const lantern = document.createElement('div');
            lantern.classList.add('lantern');
            lantern.style.left = Math.random() * 100 + 'vw';
            const duration = Math.random() * 5 + 8 + 's';
            lantern.style.animationDuration = duration;
            lantern.style.transform = `scale(${Math.random() * 0.5 + 0.5})`;
            container.appendChild(lantern);
            setTimeout(() => lantern.remove(), parseFloat(duration) * 1000);
        }

        // INITIALIZE ALL PHOTOS AT ONCE
        function initPhotos() {
            const container = document.getElementById('floating-container');
            if (!container) return;

            PHOTO_LIST.forEach((imgName) => {
                const frame = document.createElement('div');
                frame.classList.add('floating-photo');
                
                // Random Static Position (Spread across the screen)
                // Using 85vw/vh to keep them somewhat on screen
                frame.style.left = Math.random() * 85 + 'vw';
                frame.style.top = Math.random() * 85 + 'vh';
                
                // Random Animation Variables (The "Zero Displacement" Hover)
                // Move X/Y: Small movements between -20px and 20px
                const moveX = (Math.random() * 40 - 20) + 'px';
                const moveY = (Math.random() * 40 - 20) + 'px';
                
                // Rotation: Gentle twists
                const rot = (Math.random() * 20 - 10) + 'deg';
                const rotEnd = (Math.random() * 20 - 10) + 'deg';
                
                frame.style.setProperty('--move-x', moveX);
                frame.style.setProperty('--move-y', moveY);
                frame.style.setProperty('--rot', rot);
                frame.style.setProperty('--rot-end', rotEnd);

                // Random Duration (3s to 6s) for natural feel
                frame.style.animationDuration = (Math.random() * 3 + 3) + 's';
                // Random delay so they don't all move in sync
                frame.style.animationDelay = (Math.random() * 2) + 's';

                const img = document.createElement('img');
                img.src = imgName;
                img.onerror = function() { frame.style.display = 'none'; }; // Hide if missing
                
                frame.appendChild(img);
                container.appendChild(frame);
            });
        }

        // Heart Burst on Click
        function createHeartBurst(e) {
            const container = document.body;
            const heart = document.createElement('div');
            heart.innerText = '‚ù§Ô∏è';
            heart.classList.add('click-heart');
            heart.style.left = (e.clientX - 10) + 'px';
            heart.style.top = (e.clientY - 10) + 'px';
            heart.style.transform = `rotate(${Math.random() * 40 - 20}deg)`;
            container.appendChild(heart);
            setTimeout(() => heart.remove(), 1000);
        }

        // Intervals
        setInterval(createLantern, 800);
        
        // Start Timer
        function updateTimer() {
            const now = new Date();
            const diff = now - START_DATE;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const minutes = Math.floor((diff / 1000 / 60) % 60);
            const seconds = Math.floor((diff / 1000) % 60);
            document.getElementById('timer').innerText = `${days}d ${hours}h ${minutes}m ${seconds}s`;
        }
        setInterval(updateTimer, 1000);

        // Run Init Logic
        initPhotos();

        // --- TRANSITIONS ---
        function typeWriter(text, i, fnCallback) {
            if (i < text.length) {
                document.getElementById("typewriter-text").innerHTML = text.substring(0, i+1) + '<span class="cursor"></span>';
                setTimeout(function() { typeWriter(text, i + 1, fnCallback) }, 100);
            } else if (typeof fnCallback == 'function') {
                fnCallback();
            }
        }

        function startProposal(e) {
            if(e) e.stopPropagation(); 
            const music = document.getElementById('bg-music');
            if(music) { music.volume = 0.5; music.play().catch(console.log); }

            const p1 = document.getElementById('phase-1');
            p1.classList.add('opacity-0');
            
            setTimeout(() => {
                p1.classList.add('hidden-layout');
                const p2 = document.getElementById('phase-2');
                p2.classList.remove('hidden-layout');
                
                setTimeout(() => {
                    p2.classList.remove('opacity-0');
                    p2.classList.add('opacity-100');
                    typeWriter("Will You...", 0, function() {
                        document.querySelectorAll('.fade-in-delay').forEach(el => {
                            el.classList.remove('opacity-0');
                            el.classList.add('opacity-100');
                        });
                    });
                }, 100);
            }, 1000);

            // Intense Lanterns
            let intense = setInterval(createLantern, 200);
            setTimeout(() => clearInterval(intense), 5000);
            document.getElementById('bg-image').style.filter = "brightness(1.0)";
        }

        function sheSaidYes(e) {
            if(e) e.stopPropagation();
            const p2 = document.getElementById('phase-2');
            p2.classList.remove('opacity-100');
            p2.classList.add('opacity-0');

            setTimeout(() => {
                p2.classList.add('hidden-layout');
                const p3 = document.getElementById('phase-3');
                p3.classList.remove('hidden-layout');
                setTimeout(() => {
                    p3.classList.remove('opacity-0');
                    p3.classList.add('opacity-100');
                }, 50);
            }, 1000);

            setInterval(createLantern, 100);
        }
    </script>
</body>
</html>
